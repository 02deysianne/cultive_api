<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="style.css">
  <title>Cadastrar Insumo</title>
</head>
<body>
    <header>
        <img src="cultive.png" alt="Logo Gestão de Insumos" class="logo">
        <h1>Gestão de Insumos Agrícolas</h1>
      </header>      

  <div class="form-container">
  <h2>Cadastrar Novo Insumo</h2>

  <label for="nome">Nome:</label>
  <input type="text" id="nome" placeholder="Digite o nome do insumo">

  <label for="categoria">Categoria:</label>
  <input type="text" id="categoria" placeholder="Digite a categoria">

  <label for="quantidade">Quantidade:</label>
  <input type="number" id="quantidade" placeholder="Digite a quantidade">

  <label for="unidade">Unidade:</label>
  <input type="text" id="unidade" placeholder="Ex: kg, litro...">

  <button class="create" onclick="cadastrar()">Cadastrar</button>
  <button onclick="window.location.href='index.html'">Voltar</button>
</div>

  <script>
    const API_URL = "http://localhost:7000/insumos";

    function cadastrar() {
      const novoInsumo = {
        nome: document.getElementById('nome').value,
        categoria: document.getElementById('categoria').value,
        quantidadeEstoque: Number(document.getElementById('quantidade').value),
        unidade: document.getElementById('unidade').value
      };

      fetch(API_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(novoInsumo)
      })
      .then(response => response.json())
      .then(() => window.location.href = "index.html")
      .catch(() => alert("Erro ao cadastrar insumo."));
    }
  </script>
</body>
</html>
